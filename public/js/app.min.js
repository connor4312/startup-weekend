/*! Built 13-10-2013 at #SWPNS */
function jsonConcat(a,b){for(var c in b)a[c]=b[c];return a}function genericObject(a,b){this.defaults={x:width/2,y:height/2,draggable:!0,strokeRGB:colors.cyan,strokeWidth:2},this.selected=!1,this.init=function(){this.kinet=new Kinetic[this.type](jsonConcat(this.defaults,b)),this.kinet.disableStroke(),this.kinet.on("dragend",function(){API.update(this.id,this.dbt,this.updateFunc())}),this.kinet.on("click",function(){this.selected=!0,this.kinet.enableStroke()})}}function objectImage(){var a=this;this.type="Image",this.dbt="image",genericObject.call(this),this.init(),this.updateFunc=function(){return{x:a.kinet.getPosition().x,y:a.kinet.getPosition().y,xscale:a.kinet.getScale().x,yscale:a.kinet.getScale().y,url:a.getImage().src}}}function objectText(){var a=this;this.type="Text",this.dbt="text",genericObject.call(this),this.init(),this.updateFunc=function(){return{x:a.kinet.getPosition().x,y:a.kinet.getPosition().y,xscale:a.kinet.getScale().x,yscale:a.kinet.getScale().y,font:a.kinet.getFontFamily(),size:a.kinet.getFontFamily()}}}function objectColor(){var a=this;this.type="Rect",this.dbt="color",genericObject.call(this),this.init(),this.updateFunc=function(){return{x:a.kinet.getPosition().x,y:a.kinet.getPosition().y,xscale:a.kinet.getScale().x,yscale:a.kinet.getScale().y,color:a.kinet.getFillRGB().join(",")}}}var colors={base03:{r:0,g:43,b:54},base02:{r:7,g:54,b:66},base01:{r:88,g:110,b:117},base00:{r:101,g:123,b:131},base0:{r:131,g:148,b:150},base1:{r:147,g:161,b:161},base2:{r:238,g:232,b:213},base3:{r:253,g:246,b:227},yellow:{r:181,g:137,b:0},orange:{r:203,g:75,b:22},red:{r:220,g:50,b:47},magenta:{r:211,g:54,b:130},violet:{r:108,g:113,b:196},blue:{r:38,g:139,b:210},cyan:{r:42,g:161,b:152},green:{r:133,g:153,b:0}},width=800,height=600,stage=new Kinetic.Stage({container:"container",width:width,height:height}),backDrop=new Kinetic.Layer,bg=new Kinetic.Rect({width:width,height:height,fillRGB:colors.base3});for(backDrop.add(bg),i=0;width>i;i+=10){Math.floor(i/50)==i/50?(color=colors.base00,length=10):(color=colors.base2,length=5);var line=new Kinetic.Line({points:[[i,0],[i,length]],strokeRGB:color,strokeWidth:1});backDrop.add(line)}for(i=0;height>i;i+=10){Math.floor(i/50)==i/50?(color=colors.base00,length=10):(color=colors.base2,length=5);var line=new Kinetic.Line({points:[[0,i],[length,i]],strokeRGB:color,strokeWidth:1});backDrop.add(line)}var layers=function(){},API=function(){this.update=function(a,b,c){$.ajax({type:"POST",url:window.baseurl+"/api/"+b+"/"+a+"/edit",data:c})},this.create=function(a,b){$.ajax({type:"POST",url:window.baseurl+"/api/"+a+"/"+id+"/edit",data:b})},this.delete=function(a){$.ajax({type:"DELETE",url:window.baseurl+"/api/"+type+"/"+a,data:parameters})},this.get=function(a,b,c){$.ajax({type:"GET",url:window.baseurl+"/api/"+a+"/"+b,data:parameters}).done(c)},this.list=function(a,b){$.ajax({type:"GET",url:window.baseurl+"/api/"+a,data:parameters}).done(b)}};objectImage.prototype=new genericObject,objectImage.prototype.constructor=objectImage,objectText.prototype=new genericObject,objectText.prototype.constructor=objectText,objectColor.prototype=new genericObject,objectColor.prototype.constructor=objectColor;var circle=new objectColor({fillRGB:color.orange});backDrop.add(circle.kinet),stage.add(backDrop);